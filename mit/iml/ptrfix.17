TITLE PTR FIX
WRD=1
CNT=2
ADR=3
FT=7
DSKI=10
DSKO=11

GO:	.SUSET [.SSNAM,,[SIXBIT \IMLAC\]]
	.OPEN DSKI,ISPEC
	 .VALUE
	.OPEN DSKO,OSPEC
	.VALUE
	SETOM FT
LP:	.IOT DSKI,CNT
	JUMPE CNT,LP
	.IOT DSKI,ADR
	CAIN ADR,177777
	JRST WINDUP
	ADDI ADR,1000
	JUMPE FT,LP1
	SETZM FT
	MOVEM ADR,LADR
LP1:	.IOT DSKI,WRD
	MOVEM WRD,(ADR)
	AOJ ADR,
	SOJG CNT,LP1
	.IOT DSKI,WRD		; GOBBLE CECKSUM WORD
	MOVEM ADR,ADDR
	JRST LP

WINDUP:	.CLOSE DSKI,
	MOVE ADR,ADDR
	SUB ADR,LADR
	MOVNS ADR
	HRLZS ADR
	IOR ADR,LADR
	.IOT DSKO,ADR
	.CLOSE DSKO,
	.VALUE [ASCII \:DONEî\]
	JRST GO
ISPEC:	4,,'DSK
IFN1:	0
IFN2:	0
OSPEC:	7,,'DSK
OFN1:	0
OFN2:	0
ADDR:	0
LADR:	0
PATCH:
PAT:	BLOCK 100
	LOC 1000
	BLOCK 100000
END GO
